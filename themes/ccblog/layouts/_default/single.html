{{ define "main" }}
<nav class="breadcrumb">
    <a href="{{ "/" | relLangURL }}">Blog</a>
    <span class="breadcrumb-sep">/</span>
    <span>{{ .Title }}</span>
</nav>

<article>
    <div class="article-header">
        <div class="article-meta">
            <span class="article-date">{{ .Date.Format "January 2, 2006" }}</span>
            <span class="article-reading-time">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="M12 6v6l4 2"></path>
                </svg>
                {{ .ReadingTime }} min read
            </span>
        </div>
        <h1 class="article-title">{{ .Title }}</h1>
        {{ with .Params.description }}
        <p class="article-subtitle">{{ . }}</p>
        {{ end }}
        {{ with .Params.tags }}
        <div class="article-tags">
            {{ range . }}
            <a href="{{ "/tags/" | relLangURL }}{{ . | urlize | lower }}/" class="article-tag">{{ . }}</a>
            {{ end }}
        </div>
        {{ end }}
    </div>

    <div class="article-content">
        {{ .Content }}
    </div>
</article>

{{ $posts := where site.RegularPages "Section" "posts" }}
{{ $currentIndex := 0 }}
{{ range $i, $p := $posts.ByDate.Reverse }}
    {{ if eq $p.RelPermalink $.RelPermalink }}
        {{ $currentIndex = $i }}
    {{ end }}
{{ end }}

{{ $prev := index ($posts.ByDate.Reverse) (add $currentIndex 1) }}
{{ $next := index ($posts.ByDate.Reverse) (sub $currentIndex 1) }}

{{ if or $prev $next }}
<nav class="post-nav">
    {{ with $prev }}
    <a href="{{ .RelPermalink }}" class="post-nav-item prev">
        <div class="post-nav-label">&larr; Previous</div>
        <div class="post-nav-title">{{ .Title }}</div>
    </a>
    {{ else }}
    <div class="post-nav-item prev" style="visibility: hidden;"></div>
    {{ end }}
    {{ with $next }}
    <a href="{{ .RelPermalink }}" class="post-nav-item next">
        <div class="post-nav-label">Next &rarr;</div>
        <div class="post-nav-title">{{ .Title }}</div>
    </a>
    {{ end }}
</nav>
{{ end }}
{{ end }}
